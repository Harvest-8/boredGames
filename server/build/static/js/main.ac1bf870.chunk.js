(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},145:function(e,t){},149:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),o=a(27),c=a.n(o),r=(a(98),a(41),a(11)),i=a(5),l=a(6),m=a(8),h=a(7),d=(a(59),a(99),a(100),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"LoaderBalls",style:{width:this.props.size}},n.a.createElement("div",{style:{width:this.props.ball,height:this.props.ball},className:"LoaderBalls__item",id:"LoaderBalls1"}),n.a.createElement("div",{style:{width:this.props.ball,height:this.props.ball},className:"LoaderBalls__item",id:"LoaderBalls2"}),n.a.createElement("div",{style:{width:this.props.ball,height:this.props.ball},className:"LoaderBalls__item",id:"LoaderBalls3"}))}}]),a}(s.Component)),u=a(38),p=a.n(u),v=a(3),g=a(9),f="SET_ERRORS",E=a(53);E.initializeApp({apiKey:"AIzaSyDG13UAG9HhqQLBzaFHs18ByqQa-WZOEBo",authDomain:"boredgames-28c8e.firebaseapp.com",databaseURL:"https://boredgames-28c8e.firebaseio.com",projectId:"boredgames-28c8e",storageBucket:"boredgames-28c8e.appspot.com",messagingSenderId:"501020012129",appId:"1:501020012129:web:5a2e7ba131d6c5ab7d0420",measurementId:"G-52N4RGBHP9"});var b,y,S,N=E,P=(a(42),a(43),a(54)),k=N.firestore(),O=N.auth(),w=N.database(),M=function(e,t){return function(a){var s;a({type:"LOADING_UI"});var n=Object(P.validateSignupData)(e),o=n.valid,c=n.errors;o?k.doc("/users/".concat(e.handle)).get().then((function(t){if(!t.exists)return O.createUserWithEmailAndPassword(e.email,e.password);a({type:f,payload:"this username already exists"})})).then((function(e){s=e.user.uid})).then((function(){var n={recent:{timePlayed:0,winLoss:"none",movesMade:0,opponent:"none",game:"none"},chess:{gamesPlayed:0,hoursPlayed:0,gamesWon:0,winTimes:0,winMoves:0,movesMade:0},connect4:{gamesPlayed:0,hoursPlayed:0,gamesWon:0,winTimes:0,winMoves:0,movesMade:0},battleships:{gamesPlayed:0,hoursPlayed:0,gamesWon:0,winTimes:0,winMoves:0,movesMade:0},userId:s},o={handle:e.handle,joined:(new Date).toISOString(),imageUrl:"https://firebasestorage.googleapis.com/v0/b/boredgames-28c8e.appspot.com/o/".concat("no-img.png","?alt=media"),userId:s};k.doc("/users/".concat(e.handle)).set(o),k.doc("/stats/".concat(e.handle)).set(n),a(R()),a(C()),a({type:"CLEAR_ERRORS"}),t.push("/app")})).catch((function(e){console.error(e),"auth/email-already-in-use"===e.code?a({type:f,payload:"email already in use"}):a({type:f,payload:"Something went wrong, please try again "})})):a({type:f,payload:c})}},j=function(){return function(e){var t=N.auth().currentUser;w.ref("/status/".concat(t.uid)).set("offline"),N.auth().signOut().then((function(){e({type:"SET_UNAUTHENTICATED"})})).catch((function(t){e({type:f,payload:t.message})}))}},R=function(){return function(e){var t,a=N.auth().currentUser,s={};null!=a&&(t=a.uid,k.collection("users").where("userId","==",t).limit(1).get().then((function(t){s.credentials=t.docs[0].data(),e({type:"SET_USER",payload:s})})).catch((function(t){console.error(t),e({type:f,payload:t.message})})))}},C=function(){return function(e){var t,a=N.auth().currentUser,s={};null!=a&&(t=a.uid,k.collection("stats").where("userId","==",t).limit(1).get().then((function(t){s.stats=t.docs[0].data(),e({type:"SET_STATS",payload:s})})).catch((function(t){console.error(t),e({type:f,payload:t.message})})))}},I=function(e){return function(t){var a,s=N.auth().currentUser.uid;k.collection("users").where("userId","==",s).limit(1).get().then((function(s){a=s.docs[0].data().handle,k.collection("stats").doc("".concat(a)).set(e).then((function(){t(C())}))})).catch((function(e){console.log(e),t({type:f,payload:e.code})}))}},x=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",errors:{}},e}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){this.props.UI.loading;var e=this.state.errors;return n.a.createElement("div",{className:"log-sign"},n.a.createElement("h1",{className:"log-title"},"boredGames"),n.a.createElement("div",{className:"form-contain"},n.a.createElement("img",{src:p.a,className:"bishop"}),n.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},n.a.createElement("h3",{className:"form-title"},"Login"),n.a.createElement("div",{className:e.email||e.general?"error field":"field"},n.a.createElement("input",{value:this.state.email,id:"email",type:"email",name:"email",className:"input",placeholder:" ",onChange:this.handleChange}),n.a.createElement("label",{htmlFor:"email",className:"label"},"Email")),n.a.createElement("p",{className:"errors error"},e.email),n.a.createElement("div",{className:e.password||e.general?"error field":"field"},n.a.createElement("input",{value:this.state.password,id:"password",type:"password",name:"password",className:"input",placeholder:" ",onChange:this.handleChange}),n.a.createElement("label",{htmlFor:"password",className:"label"},"Password")),n.a.createElement("p",{className:"errors error"},e.password),n.a.createElement("p",{className:"errors error"},e.general),n.a.createElement("button",{type:"submit",className:"submit"},"Submit"),n.a.createElement("p",{className:"authSwitch"},"don't have an account?"," ",n.a.createElement(v.b,{to:"/signup",className:"footerLink"},"Signup")),this.props.UI.loading&&n.a.createElement(d,{size:"75px",ball:"15px"}))))}}]),a}(s.Component),D=Object(g.b)((function(e){return{user:e.user,UI:e.UI}}),{loginUser:function(e,t){return function(a){a({type:"LOADING_UI"});var s=Object(P.validateLoginData)(e),n=s.valid,o=s.errors;n?O.signInWithEmailAndPassword(e.email,e.password).then((function(){a(R()),a(C()),a({type:"CLEAR_ERRORS"}),t.push("/app")})).catch((function(e){a({type:f,payload:"Wrong credentials, please try again"})})):a({type:f,payload:o})}}})(x),B=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault(),e.setState({loading:!0});var a={email:e.state.email,password:e.state.password,confirmPassword:e.state.confirmPassword,handle:e.state.handle};e.props.signupUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",confirmPassword:"",handle:"",loading:!1,errors:{}},e}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){this.props.classes;var e=this.state,t=(e.loading,e.errors);return n.a.createElement("div",{className:"log-sign"},n.a.createElement("h1",{className:"log-title"},"boredGames"),n.a.createElement("div",{className:"form-contain"},n.a.createElement("img",{src:p.a,className:"bishop"}),n.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},n.a.createElement("h3",{className:"form-title"},"Sign Up"),n.a.createElement("div",{className:t.email||t.general?"error field":"field"},n.a.createElement("input",{value:this.state.email,id:"email",type:"email",name:"email",className:"input",placeholder:" ",onChange:this.handleChange}),n.a.createElement("label",{htmlFor:"email",className:"label"},"Email")),n.a.createElement("p",{className:"errors error"},t.email),n.a.createElement("div",Object(r.a)({className:"field"},"className",t.password||t.general?"error field":"field"),n.a.createElement("input",{value:this.state.password,id:"password",type:"password",name:"password",className:"input",placeholder:" ",onChange:this.handleChange}),n.a.createElement("label",{htmlFor:"password",className:"label"},"Password")),n.a.createElement("p",{className:"errors error"},t.password),n.a.createElement("div",{className:t.confirmPassword||t.general?"error field":"field"},n.a.createElement("input",{value:this.state.confirmPassword,id:"confirmPassword",type:"password",name:"confirmPassword",className:"input",placeholder:" ",onChange:this.handleChange}),n.a.createElement("label",{htmlFor:"password",className:"label"},"Confirm Password")),n.a.createElement("p",{className:"errors error"},t.confirmPassword),n.a.createElement("div",{className:t.handle||t.general?"error field":"field"},n.a.createElement("input",{value:this.state.handle,id:"handle",type:"text",name:"handle",className:"input",placeholder:" ",onChange:this.handleChange,maxlength:"12"}),n.a.createElement("label",{htmlFor:"username",className:"label"},"Username")),n.a.createElement("p",{className:"errors error"},t.handle),n.a.createElement("p",{className:"errors error"},t.general),n.a.createElement("button",{type:"submit",className:"submit"},"Submit"),n.a.createElement("p",{className:"authSwitch"},"already have an accout?"," ",n.a.createElement(v.b,{to:"/login",className:"footerLink"},"Login")),this.props.UI.loading&&n.a.createElement(d,{size:"75px",ball:"15px"}))))}}]),a}(s.Component),T=Object(g.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:M})(B),U=(a(114),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"background"},n.a.createElement("div",{className:"conatain"},n.a.createElement("h1",{className:"title"},"boredGames"),n.a.createElement("ul",{className:"buttnCont"},n.a.createElement("li",{className:"buttn",id:"log"},n.a.createElement(v.b,{to:"/login"},"Login")),n.a.createElement("li",{className:"buttn",id:"sign"},n.a.createElement(v.b,{to:"/signup"},"Sign Up")))))}}]),a}(s.Component)),F=a(4),L=N.firestore(),_=N.database(),G=function(){return function(e){var t,a={},s=N.auth().currentUser.uid,n=[];L.collection("users").where("userId","==",s).limit(1).get().then((function(s){t=s.docs[0].data().handle,L.collection("relations").where("from","==",t).get().then((function(t){t.forEach((function(t){n.push(t.data().to),e(function(e){return function(t){t({type:"LOADING_UI"});var a={};L.doc("/users/".concat(e)).get().then((function(s){if(!s.exists)throw{friends:"".concat(e," not found")};var n=s.data().userId;_.ref("status/"+n).on("value",(function(e){e.val()&&(a=Object(F.a)(Object(F.a)({},s.data()),{},{status:e.val()}),t({type:"APPEND_FRIEND",payload:a}))}))})).catch((function(e){console.log(e),t({type:f,payload:e})}))}}(t.data().to))}))})).then((function(){a.friendList=n,n[0]?(e({type:"SET_FRIENDS",payload:a}),e({type:"CLEAR_ERRORS"})):(a.friendList="You have no friends \ud83d\ude2d",e({type:"SET_FRIENDS",payload:a}),e({type:"CLEAR_ERRORS"}))}))})).catch((function(t){console.log(t),e({type:f,payload:t.code})}))}},A=(a(44),a(78)),W=a.n(A),H=a(57),V=a.n(H),Y=a(29),z=a.n(Y),J=a(30),Q=a.n(J),X=a(31),q=a.n(X),K=(N.database(),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.checkFriend(e.state.users),e.props.searchUser(e.state.users),e.setState({openFriend:!0})},e.addFriend=function(){e.props.addFriend(e.props.searchedFriend.handle)},e.logout=function(){e.props.logoutUser()},e.closeFriend=function(){e.setState({openFriend:!1})},e.state={users:"",friends:[],openFriend:!0},e}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a;if(a=!!this.props.stats.recent&&this.props.stats,"string"===typeof this.props.friendList)e=this.props.friendList;else{t=Object.values(this.props.friendData);var s=-1;e=t.map((function(e){return s++,n.a.createElement("li",{key:s},n.a.createElement("img",{src:e.imageUrl,alt:"icon",className:"icon ".concat(e.status)})," ",e.handle," ",n.a.createElement("a",null," ",e.status))}))}return n.a.createElement("div",{className:"BG"},n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(v.b,{to:"/app"},n.a.createElement("h3",{className:"pageTitle "},"boredGames"))),n.a.createElement("li",{className:"profile"},n.a.createElement("div",{className:"profileContain"},n.a.createElement("img",{className:"icon",src:this.props.credentials.imageUrl,alt:"icon"}),n.a.createElement("h3",null,this.props.credentials.handle),n.a.createElement("div",{className:"verticalDivide"}),n.a.createElement(v.b,{to:"/",className:"logout",onClick:this.logout},n.a.createElement("h3",null,"Logout")),n.a.createElement("img",{className:"settings",src:W.a,alt:"settings"}))))),n.a.createElement("div",{className:"contain"},n.a.createElement("h3",{className:"popGames"},"Popular games"),n.a.createElement("div",{className:"divider"}),n.a.createElement("div",{className:"games"},n.a.createElement(v.b,{to:"/games/chess",className:"game-link"},n.a.createElement("div",{className:"selector"},n.a.createElement("img",{src:z.a,alt:"chess",className:"selector-img"}))),n.a.createElement(v.b,{to:"/games/connect",className:"game-link"},n.a.createElement("div",{className:"selector"},n.a.createElement("img",{src:Q.a,alt:"connect4",className:"selector-img"}))),n.a.createElement(v.b,{to:"/games/battle",className:"game-link"},n.a.createElement("div",{className:"selector"},n.a.createElement("img",{src:q.a,alt:"connect4",className:"selector-img"})))),n.a.createElement(v.b,{to:"/games"},n.a.createElement("button",{className:"moreGames"},"See All Games"))),n.a.createElement("div",{className:"contain"},n.a.createElement("h3",{className:"popGames"},"Recent Stats"),n.a.createElement("div",{className:"divider"}),n.a.createElement("div",{className:"statsList"},n.a.createElement("h3",{className:"stat"},"Game: ",a?a.recent.game:"Loading..."),n.a.createElement("h3",{className:"stat"},"Opponent: ",a?a.recent.opponent:"Loading..."),n.a.createElement("h3",{className:"stat"},"Outcome: ",a?a.recent.winLoss:"Loading..."),n.a.createElement("h3",{className:"stat"},"Moves Made: ",a?a.recent.movesMade:"Loading..."),n.a.createElement("h3",{className:"stat"},"Time Played: ",a?a.recent.timePlayed.toFixed(0):"Loading..."," seconds")),n.a.createElement(v.b,{to:"/stats"},n.a.createElement("button",{className:"moreGames"},"See More Statistics"))),n.a.createElement("div",{className:"people"},n.a.createElement("div",{className:"searchUsers"},n.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},n.a.createElement("input",{value:this.state.users,id:"users",type:"text",name:"users",className:"input",placeholder:"search users",onChange:this.handleChange}))),n.a.createElement("div",{className:"friendContain"},n.a.createElement("h3",null,"Friends"),n.a.createElement("div",{className:"divider"}),n.a.createElement("ul",{className:"friends"},e),this.props.UI.errors&&this.state.openFriend&&n.a.createElement("div",{className:"searchedFriend",onClick:this.closeFriend},n.a.createElement("img",{id:"close",src:V.a}),n.a.createElement("h3",null,this.props.UI.errors.friends)),this.props.searchedFriend.handle&&!this.props.UI.errors&&this.state.openFriend&&n.a.createElement("div",{className:"searchedFriend",onClick:this.closeFriend},n.a.createElement("img",{id:"close",src:V.a}),n.a.createElement("h3",null,this.props.searchedFriend.handle),n.a.createElement("img",{src:this.props.searchedFriend.imageUrl,alt:"icon"}),this.props.isFriend&&n.a.createElement("button",{onClick:this.addFriend},"Add Friend \u2795")),this.props.UI.loading&&n.a.createElement("div",{className:"searchedFriend"},n.a.createElement(d,{size:"75px",ball:"15px"})))))}}]),a}(s.Component)),Z=Object(g.b)((function(e){return{authenticated:e.user.authenticated,UI:e.UI,credentials:e.user.credentials,stats:e.statistics.stats,friendList:e.friends.friendList,friendData:e.friends.friendData,searchedFriend:e.friends.searchedFriend,isFriend:e.friends.isFriend}}),{logoutUser:j,checkFriend:function(e){return function(t){var a,s=N.auth().currentUser.uid;L.collection("users").where("userId","==",s).limit(1).get().then((function(s){a=s.docs[0].data().handle,L.doc("/relations/".concat(a).concat(e)).get().then((function(e){e.exists?t({type:"IS_FRIEND"}):t({type:"NOT_FRIEND"})}))})).catch((function(e){console.log(e),t({type:f,payload:e.code})}))}},searchUser:function(e){return function(t){var a={};t({type:"LOADING_UI"}),L.doc("/users/".concat(e)).get().then((function(s){if(a.searchedFriend=s.data(),!s.exists)throw{friends:"".concat(e," not found")};t({type:"SEARCH_FRIEND",payload:a}),t({type:"CLEAR_ERRORS"})})).catch((function(e){console.log(e),t({type:f,payload:e})}))}},addFriend:function(e){return function(t){var a,s=N.auth().currentUser.uid;L.collection("users").where("userId","==",s).limit(1).get().then((function(s){a=s.docs[0].data().handle,L.collection("relations").doc("".concat(a).concat(e)).set({from:"".concat(a),to:"".concat(e)}).then((function(){t({type:"SET_FRIEND"}),t(G())}))})).catch((function(e){console.log(e),t({type:f,payload:e.code})}))}},getFriends:G})(K),$=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"gamesBG"},n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(v.b,{to:"/app"},n.a.createElement("h3",{className:"pageTitle "},"boredGames"))),n.a.createElement("li",null))),n.a.createElement("div",{className:"gameGrid"},n.a.createElement("div",{className:"gameSelector"},n.a.createElement(v.b,{to:"/games/chess",className:"game-link"},n.a.createElement("div",{className:"selector"},n.a.createElement("img",{src:z.a,alt:"chess",className:"selector-img"}),n.a.createElement("h3",null,"Chess")))),n.a.createElement("div",{className:"gameSelector"},n.a.createElement(v.b,{to:"/games/connect",className:"game-link"},n.a.createElement("div",{className:"selector"},n.a.createElement("img",{src:Q.a,alt:"connect4",className:"selector-img"}),n.a.createElement("h3",null,"Connect 4")))),n.a.createElement("div",{className:"gameSelector"},n.a.createElement(v.b,{to:"/games/battle",className:"game-link"},n.a.createElement("div",{className:"selector"},n.a.createElement("img",{src:q.a,alt:"connect4",className:"selector-img"}),n.a.createElement("h3",null,"Battleships"))))))}}]),a}(s.Component),ee=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){function e(e,t){var a=Math.pow(10,t||0);return Math.round(e*a)/a}return n.a.createElement("div",{className:"BG"},n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(v.b,{to:"/app"},n.a.createElement("h3",{className:"pageTitle "},"boredGames"))),n.a.createElement("li",null))),n.a.createElement("div",{className:"contain"},n.a.createElement("h3",{className:"popGames"},"Chess"),n.a.createElement("div",{className:"divider"}),n.a.createElement("div",{className:"statsList"},n.a.createElement("h3",{className:"stat"},"Games Played: ",this.props.stats.chess.gamesPlayed),n.a.createElement("h3",{className:"stat"},"Hours Played: ",e(this.props.stats.chess.hoursPlayed/60/60,2)," Hrs"),n.a.createElement("h3",{className:"stat"},"Games Won: ",this.props.stats.chess.gamesWon),n.a.createElement("h3",{className:"stat"},"Win Loss Ratio: ",this.props.stats.chess.gamesWon/this.props.stats.chess.gamesPlayed),n.a.createElement("h3",{className:"stat"},"Average Time Per Match: ",this.props.stats.chess.hoursPlayed/this.props.stats.chess.gamesPlayed," seconds"),n.a.createElement("h3",{className:"stat"},"Average Time Per Win: ",this.props.stats.chess.winTimes/this.props.stats.chess.gamesWon," seconds"))),n.a.createElement("div",{className:"contain"},n.a.createElement("h3",null,"Connect 4"),n.a.createElement("div",{className:"divider"}),n.a.createElement("div",{className:"statsList"},n.a.createElement("h3",{className:"stat"},"Games Played: ",this.props.stats.connect4.gamesPlayed),n.a.createElement("h3",{className:"stat"},"Hours Played: ",e(this.props.stats.connect4.hoursPlayed/60/60,2)," Hrs"),n.a.createElement("h3",{className:"stat"},"Games Won: ",this.props.stats.connect4.gamesWon),n.a.createElement("h3",{className:"stat"},"Win Loss Ratio: ",this.props.stats.connect4.gamesWon/this.props.stats.connect4.gamesPlayed),n.a.createElement("h3",{className:"stat"},"Average Time Per Match: ",this.props.stats.connect4.hoursPlayed/this.props.stats.connect4.gamesPlayed," seconds"),n.a.createElement("h3",{className:"stat"},"Average Time Per Win: ",this.props.stats.connect4.winTimes/this.props.stats.connect4.gamesWon," seconds"))),n.a.createElement("div",{className:"contain"},n.a.createElement("h3",null,"Battleships"),n.a.createElement("div",{className:"divider"}),n.a.createElement("div",{className:"statsList"},n.a.createElement("h3",{className:"stat"},"Games Played: ",this.props.stats.battleships.gamesPlayed),n.a.createElement("h3",{className:"stat"},"Hours Played: ",e(this.props.stats.battleships.hoursPlayed/60/60,2)," Hrs"),n.a.createElement("h3",{className:"stat"},"Games Won: ",this.props.stats.battleships.gamesWon),n.a.createElement("h3",{className:"stat"},"Win Loss Ratio: ",this.props.stats.battleships.gamesWon/this.props.stats.battleships.gamesPlayed),n.a.createElement("h3",{className:"stat"},"Average Time Per Match: ",this.props.stats.battleships.hoursPlayed/this.props.stats.battleships.gamesPlayed," seconds"),n.a.createElement("h3",{className:"stat"},"Average Time Per Win: ",this.props.stats.battleships.winTimes/this.props.stats.battleships.gamesWon," seconds"))))}}]),a}(s.Component),te=Object(g.b)((function(e){return{user:e.user,stats:e.statistics.stats}}))(ee),ae=a(92),se=a(79),ne=a.n(se),oe=a(80),ce=a.n(oe),re=a(81),ie=a.n(re),le=a(82),me=a.n(le),he=a(83),de=a.n(he),ue=a(84),pe=a.n(ue),ve=a(85),ge=a.n(ve),fe=a(86),Ee=a.n(fe),be=a(87),ye=a.n(be),Se=a(88),Ne=a.n(Se),Pe=a(89),ke=a.n(Pe),Oe=a(90),we=a.n(Oe),Me=a(19),je=(a(115),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.black?"silver":"white";return n.a.createElement(Me.c,{droppableId:"".concat(this.props.location)},(function(a,s){return n.a.createElement("div",{onClick:e.props.onMove,id:e.props.location,className:"chessPanel ".concat(t)},n.a.createElement("div",{ref:a.innerRef,className:s.isDraggingOver?"highlighted":"",style:{position:"absolute",height:"100%",width:"100%"}},a.placeholder),n.a.createElement("div",{className:"peice-container"},e.props.children))}))}}]),a}(s.Component)),Re=(a(45),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(Me.b,{key:this.props.id,draggableId:""+this.props.id,index:this.props.id},(function(t){return n.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{className:"draggable-area"}),n.a.createElement("img",{onClick:e.props.getPeice,id:e.props.id,src:e.props.img,className:"peice",alt:"peice"}))}))}}]),a}(s.Component)),Ce=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.currentFen;if(null===e)e=["11111111","11111111","11111111","11111111","11111111","11111111","11111111","11111111"];else{(e=e.split("/"))[7]=e[7].split(" ")[0];for(var t=0;t<8;t++){var a,s=Object(ae.a)(e[t]);try{for(s.s();!(a=s.n()).done;){var o=a.value,c=parseInt(o);if(isNaN(c))0;else{e[t]=e[t].replace(o,"1".repeat(c)),c}}}catch(d){s.e(d)}finally{s.f()}}}for(var r=[],i=0;i<8;i++)for(var l=0;l<8;l++){var m=(l+i)%2===1,h=parseInt(e[i][l]);isNaN(h)?"P"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:we.a}))):"p"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:pe.a}))):"R"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:Ne.a}))):"r"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:me.a}))):"N"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:ke.a}))):"n"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:de.a}))):"B"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:ge.a}))):"b"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:ne.a}))):"Q"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:ye.a}))):"q"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:ie.a}))):"K"===e[i][l]?r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:Ee.a}))):"k"===e[i][l]&&r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m},n.a.createElement(Re,{id:l+8*i,getPeice:this.props.getPeice,img:ce.a}))):r.push(n.a.createElement(je,{key:l+8*i,onMove:this.props.onMove,location:"".concat(l,"-").concat(i),black:m}))}return n.a.createElement(Me.a,{onDragEnd:this.props.handleDrag},n.a.createElement("div",{className:"chessboard ".concat(this.props.player)},r))}}]),a}(s.Component),Ie=N.firestore(),xe=(N.database(),function(e){return function(t){var a={};t({type:"LOADING_UI"}),Ie.doc("/users/".concat(e)).get().then((function(e){a.opponent=e.data(),e.exists&&(t({type:"SET_OPPONENT",payload:a}),t({type:"CLEAR_ERRORS"}))})).catch((function(e){console.log(e),t({type:f,payload:e})}))}}),De=a(24),Be=a.n(De),Te=a(148),Ue=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.customGame=function(t){t.preventDefault();var a=e.state.code;if(e.state.joinedRoom){var s=e.state.user;b.emit("waiting",{user:s,room:a})}},e.handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.chess=null,e.checkingMove=null,e.state={getPeice:null,targetPanel:null,targetPeice:null,peicePanel:null,currentFen:null,user:null,opponent:{},joinedRoom:!1,joinedMatch:!1,matchRoom:null,player:null,loading:!1,promo:!1,prevMove:null,lost:!1,won:!1,draw:!1,startTime:null,movesMade:0,inCheck:!1,onlinePlayers:0,roomCode:"",customRoom:null},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props.user.credentials.handle!==e.user.credentials.handle){b.emit("disconnected");var t=this.props.user.credentials.handle;console.log("".concat(t," joining ").concat("chess")),b.emit("joinRoom",{user:t,room:"chess"}),this.setState({user:this.props.user.credentials.handle})}}},{key:"componentDidMount",value:function(){var e=this;if(b=Be()(),this.props.user.credentials.handle){var t=this.props.user.credentials.handle;console.log("".concat(t," joining ").concat("chess")),b.emit("joinRoom",{user:t,room:"chess"}),this.setState({user:this.props.user.credentials.handle})}b.on("joinedRoom",(function(t){e.setState({joinedRoom:t}),console.log("joined ".concat(t))})),b.on("loading",(function(t){e.setState({loading:t})})),b.on("joinedMatch",(function(t){e.chess=new Te,e.checkingMove=new Te;var a=new Date;e.setState({startTime:a}),e.setState({currentFen:e.chess.fen()}),e.setState({joinedMatch:!0}),e.setState({matchRoom:t}),e.props.getUserStats(),console.log("joined match ".concat(t))})),b.on("player",(function(t){e.setState({player:t.colour}),e.gameOpponent(t.opp)})),b.on("sendMove",(function(t){e.onlineMove(t),e.gameOver(e.chess),e.check(e.chess)})),b.on("numOnline",(function(t){e.setState({onlinePlayers:t})}))}},{key:"componentWillUnmount",value:function(){b.emit("disconnected")}},{key:"gameOpponent",value:function(e){this.props.setOpponent(e)}},{key:"onlineMove",value:function(e){this.chess.load(e),this.setState({currentFen:e}),console.log("moved")}},{key:"formatMove",value:function(e,t){return(e=e.split("-"))[0]=parseInt(e[0]),e[1]=parseInt(e[1]),(t=t.split("-"))[0]=parseInt(t[0]),t[1]=parseInt(t[1]),{fromPan:e,coords:t}}},{key:"checkMove",value:function(e){var t=e.split(" ");return"black"===this.state.player?"w"!==t[1]:"b"!==t[1]}},{key:"highlightPanels",value:function(e){for(var t=["a","b","c","d","e","f","g","h"],a=["8","7","6","5","4","3","2","1"],s=0;s<8;s++)for(var n=0;n<8;n++){this.checkingMove.load(this.state.currentFen);var o=this.formatMove(e,"".concat(s,"-").concat(n)),c=o.fromPan,r=o.coords;if(this.checkingMove.move({from:"".concat(t[c[0]]).concat(a[c[1]]),to:"".concat(t[r[0]]).concat(a[r[1]])}))document.getElementById("".concat(s,"-").concat(n)).firstElementChild.classList.add("highlighted");else document.getElementById("".concat(s,"-").concat(n)).firstElementChild.classList.remove("highlighted")}}},{key:"updateStats",value:function(e){var t=((new Date).getTime()-this.state.startTime.getTime())/1e3,a=this.props.stats;a.chess.gamesPlayed=a.chess.gamesPlayed+1,a.chess.hoursPlayed=a.chess.hoursPlayed+t,a.chess.movesMade=a.chess.movesMade+this.state.movesMade,e?(a.chess.gamesWon=a.chess.gamesWon+1,a.chess.winTimes=a.chess.winTimes+t,a.chess.winMoves=a.chess.winMoves+this.state.movesMade,a.recent.winLoss="Win"):a.recent.winLoss="Loss",a.recent.game="Chess",a.recent.movesMade=this.state.movesMade,a.recent.opponent=this.props.opponent.opponent.handle,a.recent.timePlayed=t,this.props.setUserStats(a)}},{key:"gameOver",value:function(e){if(e.in_checkmate()){var t=e.fen().split(" ")[1];"w"===t?"white"===this.state.player?(this.setState({lost:!0}),this.updateStats(!1)):(this.setState({won:!0}),this.updateStats(!0)):"b"===t&&("black"===this.state.player?(this.setState({lost:!0}),this.updateStats(!1)):(this.setState({won:!0}),this.updateStats(!0)))}else(e.in_draw()||e.in_stalemate())&&(this.setState({draw:!0}),this.updateStats(!1))}},{key:"check",value:function(e){var t=this;e.in_check()&&(this.setState({inCheck:!0}),setTimeout((function(){t.setState({inCheck:!1})}),2500))}},{key:"choosePromo",value:function(e){this.chess.move({from:this.state.prevMove[0],to:this.state.prevMove[1],promotion:e}),this.setState({promo:!1});var t=this.chess.fen(),a=this.state.matchRoom;b.emit("sendMove",{currentmove:t,matchRoom:a}),this.setState({currentFen:this.chess.fen()})}},{key:"checkPromo",value:function(e){var t=this.chess.get("".concat(["a","b","c","d","e","f","g","h"][e[0]]).concat(["8","7","6","5","4","3","2","1"][e[1]]));return(1===e[1]&&"p"===t.type&&"w"===t.color||6===e[1]&&"p"===t.type&&"b"===t.color)&&(this.setState({promo:!0}),!0)}},{key:"render",value:function(){var e=this,t=["a","b","c","d","e","f","g","h"],a=["8","7","6","5","4","3","2","1"];return this.state.joinedMatch?n.a.createElement("div",null,n.a.createElement("div",{className:"boardContainer"},n.a.createElement("ul",{className:"playerDetails"},n.a.createElement("li",null,n.a.createElement("img",{src:this.props.opponent.opponent.imageUrl,alt:"icon",className:"gameIcon"})),n.a.createElement("li",null,n.a.createElement("a",{className:"gameHandle"}," ",this.props.opponent.opponent.handle))),n.a.createElement(Ce,{getPeice:function(t){var a,s,n=["a","b","c","d","e","f","g","h"],o=["8","7","6","5","4","3","2","1"];if(a=t.target.id,s=t.target.parentNode.parentNode.parentNode.id,a=parseInt(a),e.highlightPanels(s),null!==e.state.targetPeice){var c=e.formatMove(e.state.peicePanel,s),r=c.fromPan,i=c.coords;e.checkPromo(r)?null!==e.state.promotionTo&&(e.chess.move({from:"".concat(n[r[0]]).concat(o[r[1]]),to:"".concat(n[i[0]]).concat(o[i[1]])}),e.highlightPanels(s),e.setState({prevMove:["".concat(n[r[0]]).concat(o[r[1]]),"".concat(n[i[0]]).concat(o[i[1]])]})):(e.chess.move({from:"".concat(n[r[0]]).concat(o[r[1]]),to:"".concat(n[i[0]]).concat(o[i[1]])}),e.setState({prevMove:["".concat(n[r[0]]).concat(o[r[1]]),"".concat(n[i[0]]).concat(o[i[1]])]}));var l=e.chess.fen(),m=e.state.matchRoom;e.state.currentFen!==e.chess.fen()&&(e.setState({movesMade:e.state.movesMade+1}),b.emit("sendMove",{currentmove:l,matchRoom:m})),e.setState({currentFen:e.chess.fen()}),e.setState({targetPeice:a}),e.setState({peicePanel:s})}else e.setState({targetPeice:a}),e.setState({peicePanel:s});e.gameOver(e.chess),e.check(e.chess)},player:this.state.player,onMove:function(s){var n;if(n="string"===typeof s?s:s.target.parentNode.id,e.setState({targetPanel:n}),null!==e.state.targetPeice){var o=e.formatMove(e.state.peicePanel,n),c=o.fromPan,r=o.coords;if(e.checkMove(e.chess.fen()))if(e.checkPromo(c),e.chess.move({from:"".concat(t[c[0]]).concat(a[c[1]]),to:"".concat(t[r[0]]).concat(a[r[1]])}),e.setState({prevMove:["".concat(t[c[0]]).concat(a[c[1]]),"".concat(t[r[0]]).concat(a[r[1]])]}),e.state.currentFen===e.chess.fen());else{var i=e.chess.fen(),l=e.state.matchRoom;e.state.currentFen!==e.chess.fen()&&(e.setState({movesMade:e.state.movesMade+1}),b.emit("sendMove",{currentmove:i,matchRoom:l})),e.setState({currentFen:e.chess.fen()})}e.highlightPanels(n),e.setState({targetPeice:null}),e.setState({peicePanel:null})}e.gameOver(e.chess),e.check(e.chess)},handleDrag:function(s){var n=s.destination,o=s.source;s.draggableId;if(n&&(n.droppableId!==o.droppableId||n.index!==o.index)){var c=e.formatMove(o.droppableId,n.droppableId),r=c.fromPan,i=c.coords;if(e.checkMove(e.chess.fen()))if(e.checkPromo(r)?null!==e.state.promotionTo&&(e.chess.move({from:"".concat(t[r[0]]).concat(a[r[1]]),to:"".concat(t[i[0]]).concat(a[i[1]])}),e.setState({prevMove:["".concat(t[r[0]]).concat(a[r[1]]),"".concat(t[i[0]]).concat(a[i[1]])]})):(e.chess.move({from:"".concat(t[r[0]]).concat(a[r[1]]),to:"".concat(t[i[0]]).concat(a[i[1]])}),e.setState({prevMove:["".concat(t[r[0]]).concat(a[r[1]]),"".concat(t[i[0]]).concat(a[i[1]])]})),e.state.currentFen===e.chess.fen());else{var l=e.chess.fen(),m=e.state.matchRoom;e.state.currentFen!==e.chess.fen()&&(e.setState({movesMade:e.state.movesMade+1}),b.emit("sendMove",{currentmove:l,matchRoom:m})),e.setState({currentFen:e.chess.fen()})}e.gameOver(e.chess),e.check(e.chess)}},currentFen:this.state.currentFen}),n.a.createElement("ul",{className:"playerDetails"},n.a.createElement("li",null,n.a.createElement("img",{src:this.props.user.credentials.imageUrl,alt:"icon",className:"gameIcon"})),n.a.createElement("li",null,n.a.createElement("a",{className:"gameHandle"}," ",this.props.user.credentials.handle)))),this.state.promo&&n.a.createElement("div",{className:"promotion"},n.a.createElement("button",{className:"btn",onClick:function(){e.choosePromo("q")}},"Queen"),n.a.createElement("button",{className:"btn",onClick:function(){e.choosePromo("r")}},"Rook"),n.a.createElement("button",{className:"btn",onClick:function(){e.choosePromo("b")}},"Bishop"),n.a.createElement("button",{className:"btn",onClick:function(){e.choosePromo("n")}},"Knight")),this.state.won&&n.a.createElement("div",{className:"endScreen"},n.a.createElement("h3",null,"You Won"),n.a.createElement(v.b,{to:"/games",className:"btn"},"Back to games")),this.state.draw&&n.a.createElement("div",{className:"endScreen"},n.a.createElement("h3",null,"Draw"),n.a.createElement(v.b,{to:"/games",className:"btn"},"Back to games")),this.state.lost&&n.a.createElement("div",{className:"endScreen"},n.a.createElement("h3",null,"You Lost"),n.a.createElement(v.b,{to:"/games",className:"btn"},"Back to games")),this.state.inCheck&&n.a.createElement("h1",{className:"alert"},"Check")):n.a.createElement("div",{style:{textAlign:"center"},className:"BG"},n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(v.b,{to:"/app"},n.a.createElement("h3",{className:"pageTitle "},"boredGames"))),n.a.createElement("li",null))),n.a.createElement("h3",{className:"popGames"},"Chess"),n.a.createElement("div",{className:"divider"}),this.state.user&&!this.state.loading&&n.a.createElement("div",null,n.a.createElement("button",{className:"btn",onClick:function(){if(e.state.joinedRoom){var t=e.state.user;b.emit("waiting",{user:t,room:"chess"})}}},"Find Match")),this.state.user&&this.state.loading&&n.a.createElement("button",{className:"btn",onClick:function(){if(e.state.joinedRoom){var t=e.state.user;b.emit("stopSearch",{user:t,room:"chess"})}}},"Cancel search"),this.state.loading&&n.a.createElement("h3",{className:"load"},"Loading..."),n.a.createElement("h4",{style:{marginBottom:"1rem",color:"white"}},"Players online: ",this.state.onlinePlayers),n.a.createElement("div",null,n.a.createElement("h3",{className:"popGames"},"Custom Match"),n.a.createElement("button",{className:"btn",onClick:function(){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=a.length,n=0;n<6;n++)t+=a.charAt(Math.floor(Math.random()*s));e.setState({customRoom:t})}},"Generate Code"),this.state.customRoom&&n.a.createElement("h3",null,this.state.customRoom),n.a.createElement("div",{className:"inputCode"},n.a.createElement("form",{noValidate:!0,onSubmit:this.customGame},n.a.createElement("input",{value:this.state.users,id:"code",type:"text",name:"code",className:"input",placeholder:"input code",onChange:this.handleChange}),n.a.createElement("button",{type:"submit",className:"btn"},"Join")))))}}]),a}(s.Component),Fe=Object(g.b)((function(e){return{user:e.user,opponent:e.opponent,stats:e.statistics.stats}}),{setOpponent:xe,setUserStats:I,getUserStats:C})(Ue),Le=(a(76),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.currentBoard;null===e&&(e=[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]]);for(var t=[],a=0;a<7;a++)for(var s=0;s<6;s++)0===e[a][s]&&t.push(n.a.createElement("div",{key:s+7*a,location:"".concat(a,"-").concat(s),className:"panel"},n.a.createElement("div",{className:"disc"}))),1===e[a][s]&&t.push(n.a.createElement("div",{key:s+7*a,location:"".concat(a,"-").concat(s),className:"panel"},n.a.createElement("div",{className:"disc-red"}))),2===e[a][s]&&t.push(n.a.createElement("div",{key:s+7*a,location:"".concat(a,"-").concat(s),className:"panel"},n.a.createElement("div",{className:"disc-yellow"})));return n.a.createElement("div",{className:"connectboard"},t)}}]),a}(s.Component)),_e=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.customGame=function(t){t.preventDefault();var a=e.state.code;if(e.state.joinedRoom){var s=e.state.user;y.emit("waiting",{user:s,room:a})}},e.handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.state={currentBoard:null,user:null,opponent:{},joinedRoom:!1,joinedMatch:!1,matchRoom:null,player:null,myMove:null,loading:!1,lost:!1,won:!1,draw:!1,startTime:null,movesMade:0,onlinePlayers:0,roomCode:""},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props.user.credentials.handle!==e.user.credentials.handle){y.emit("disconnected");var t=this.props.user.credentials.handle;console.log("".concat(t," joining ").concat("connect")),y.emit("joinRoom",{user:t,room:"connect"}),this.setState({user:this.props.user.credentials.handle})}}},{key:"componentDidMount",value:function(){var e=this;if(y=Be()(),this.props.user.credentials.handle){var t=this.props.user.credentials.handle;console.log("".concat(t," joining ").concat("connect")),y.emit("joinRoom",{user:t,room:"connect"}),this.setState({user:this.props.user.credentials.handle})}y.on("joinedRoom",(function(t){e.setState({joinedRoom:t}),console.log("joined ".concat(t))})),y.on("loading",(function(t){e.setState({loading:t})})),y.on("joinedMatch",(function(t){e.setState({currentBoard:[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]]});var a=new Date;e.setState({startTime:a}),e.setState({joinedMatch:!0}),e.setState({matchRoom:t}),e.props.getUserStats(),console.log("joined match ".concat(t))})),y.on("player",(function(t){e.setState({player:t.colour}),e.gameOpponent(t.opp),"white"===t.colour?e.setState({myMove:!0}):e.setState({myMove:!1})})),y.on("sendMove",(function(t){e.onlineMove(t),e.gameOver(t)})),y.on("numOnline",(function(t){e.setState({onlinePlayers:t})}))}},{key:"componentWillUnmount",value:function(){y.emit("disconnected")}},{key:"gameOpponent",value:function(e){this.props.setOpponent(e)}},{key:"onlineMove",value:function(e){this.setState({currentBoard:e}),this.setState({myMove:!0}),console.log("moved")}},{key:"updateStats",value:function(e){var t=((new Date).getTime()-this.state.startTime.getTime())/1e3,a=this.props.stats;a.connect4.gamesPlayed=a.connect4.gamesPlayed+1,a.connect4.hoursPlayed=a.connect4.hoursPlayed+t,a.connect4.movesMade=a.connect4.movesMade+this.state.movesMade,e?(a.connect4.gamesWon=a.connect4.gamesWon+1,a.connect4.winTimes=a.connect4.winTimes+t,a.connect4.winMoves=a.connect4.winMoves+this.state.movesMade,a.recent.winLoss="Win"):a.recent.winLoss="Loss",a.recent.game="Connect 4",a.recent.movesMade=this.state.movesMade,a.recent.opponent=this.props.opponent.opponent.handle,a.recent.timePlayed=t,this.props.setUserStats(a)}},{key:"gameOver",value:function(e){for(var t,a,s,n=0;n<7;n++)for(var o=0;o<6;o++)1===e[n][o]?(a++,s++):a=0,2===e[n][o]?(t++,s++):t=0,t>=4&&("black"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1))),a>=4&&("white"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1))),s>=42&&(this.setState({draw:!0}),this.setState({myMove:!1}),this.updateStats(!1));for(var c=0;c<6;c++)for(var r=0;r<7;r++)1===e[r][c]?a++:a=0,2===e[r][c]?t++:t=0,t>=4&&("black"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1))),a>=4&&("white"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1)));for(var i=0;i<3;i++)for(var l=0;l<7&&!(i+l>=6);l++)1===e[l][i+l]?a++:a=0,2===e[l][i+l]?t++:t=0,t>=4&&("black"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1))),a>=4&&("white"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1)));for(var m=1;m<4;m++)for(var h=0;h<7&&!(m+h>=7);h++)1===e[m+h][h]?a++:a=0,2===e[m+h][h]?t++:t=0,t>=4&&("black"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1))),a>=4&&("white"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1)));for(var d=0;d<3;d++)for(var u=0;u<7&&!(d+u>=6);u++)1===e[5-u][d+u]?a++:a=0,2===e[5-u][d+u]?t++:t=0,t>=4&&("black"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1))),a>=4&&("white"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1)));for(var p=1;p<4;p++)for(var v=0;v<7&&!(p+v>=7);v++)1===e[6-(p+v)][v]?a++:a=0,2===e[6-(p+v)][v]?t++:t=0,t>=4&&("black"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1))),a>=4&&("white"===this.state.player?(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)):(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1)))}},{key:"render",value:function(){var e=this,t=function(t){var a,s=t.target.id,n=e.state.matchRoom,o=!1;a="white"===e.state.player?1:2,s=parseInt(s);for(var c=e.state.currentBoard,r=5;r>=0;r--)if(0===c[s][r]){c[s][r]=a,o=!0;break}e.state.myMove&&o&&(e.setState({movesMade:e.state.movesMade+1}),y.emit("sendMove",{currentmove:c,matchRoom:n}),e.setState({currentBoard:c}),e.setState({myMove:!1}),e.gameOver(c))};return this.state.joinedMatch?n.a.createElement("div",null,n.a.createElement("div",{className:"boardContainer"},n.a.createElement("ul",{className:"playerDetails"},n.a.createElement("li",null,n.a.createElement("img",{src:this.props.opponent.opponent.imageUrl,alt:"icon",className:"gameIcon"})),n.a.createElement("li",null,n.a.createElement("a",{className:"gameHandle"}," ",this.props.opponent.opponent.handle))),n.a.createElement("div",{className:"interactive"},n.a.createElement("div",{className:"clickDetect"},n.a.createElement("div",{className:"clicker",id:"0col",onClick:t}),n.a.createElement("div",{className:"clicker",id:"1col",onClick:t}),n.a.createElement("div",{className:"clicker",id:"2col",onClick:t}),n.a.createElement("div",{className:"clicker",id:"3col",onClick:t}),n.a.createElement("div",{className:"clicker",id:"4col",onClick:t}),n.a.createElement("div",{className:"clicker",id:"5col",onClick:t}),n.a.createElement("div",{className:"clicker",id:"6col",onClick:t})),n.a.createElement(Le,{currentBoard:this.state.currentBoard})),n.a.createElement("ul",{className:"playerDetails"},n.a.createElement("li",null,n.a.createElement("img",{src:this.props.user.credentials.imageUrl,alt:"icon",className:"gameIcon"})),n.a.createElement("li",null,n.a.createElement("a",{className:"gameHandle"}," ",this.props.user.credentials.handle)))),this.state.won&&n.a.createElement("div",{className:"endScreen"},n.a.createElement("h3",null,"You Won"),n.a.createElement(v.b,{to:"/games",className:"btn"},"Back to games")),this.state.draw&&n.a.createElement("div",{className:"endScreen"},n.a.createElement("h3",null,"Draw"),n.a.createElement(v.b,{to:"/games",className:"btn"},"Back to games")),this.state.lost&&n.a.createElement("div",{className:"endScreen"},n.a.createElement("h3",null,"You Lost"),n.a.createElement(v.b,{to:"/games",className:"btn"},"Back to games"))):n.a.createElement("div",{style:{textAlign:"center"},className:"BG"},n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(v.b,{to:"/app"},n.a.createElement("h3",{className:"pageTitle "},"boredGames"))),n.a.createElement("li",null))),n.a.createElement("h3",{className:"popGames"},"Connect"),n.a.createElement("div",{className:"divider"}),this.state.user&&!this.state.loading&&n.a.createElement("div",null,n.a.createElement("button",{className:"btn",onClick:function(){if(e.state.joinedRoom){var t=e.state.user;y.emit("waiting",{user:t,room:"connect"})}}},"Find Match")),this.state.user&&this.state.loading&&n.a.createElement("button",{className:"btn",onClick:function(){if(e.state.joinedRoom){var t=e.state.user;y.emit("stopSearch",{user:t,room:"connect"})}}},"Cancel search"),this.state.loading&&n.a.createElement("h3",{className:"load"},"Loading..."),n.a.createElement("h4",{style:{marginBottom:"1rem",color:"white"}},"Players online: ",this.state.onlinePlayers),n.a.createElement("div",null,n.a.createElement("h3",{className:"popGames"},"Custom Match"),n.a.createElement("button",{className:"btn",onClick:function(){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=a.length,n=0;n<6;n++)t+=a.charAt(Math.floor(Math.random()*s));e.setState({customRoom:t})}},"Generate Code"),this.state.customRoom&&n.a.createElement("h3",null,this.state.customRoom),n.a.createElement("div",{className:"inputCode"},n.a.createElement("form",{noValidate:!0,onSubmit:this.customGame},n.a.createElement("input",{value:this.state.users,id:"code",type:"text",name:"code",className:"input",placeholder:"input code",onChange:this.handleChange}),n.a.createElement("button",{type:"submit",className:"btn"},"Join")))))}}]),a}(s.Component),Ge=Object(g.b)((function(e){return{user:e.user,opponent:e.opponent,stats:e.statistics.stats}}),{setOpponent:xe,setUserStats:I,getUserStats:C})(_e),Ae=(a(149),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={angle:!1},e}return Object(l.a)(a,[{key:"render",value:function(){for(var e=this,t=[],a=0;a<this.props.length;a++)t.push(n.a.createElement("div",{key:a,num:a,className:"part"},n.a.createElement("div",{key:a,className:"partInner"})));return n.a.createElement(Me.b,{key:this.props.index,id:this.props.id,draggableId:this.props.id,index:this.props.index},(function(a){return n.a.createElement("div",Object.assign({id:e.props.id,ref:a.innerRef},a.draggableProps,a.dragHandleProps,{className:e.state.angle?"rotated ship":"ship",onClick:function(){e.setState({angle:!e.state.angle}),e.props.checkRotate(e.props.id)}}),t)}))}}]),a}(s.Component)),We=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(Me.c,{droppableId:"".concat(this.props.location)},(function(t,a){return n.a.createElement("div",{id:e.props.location,className:"shipPanel"},n.a.createElement("div",{ref:t.innerRef,className:a.isDraggingOver?"highlighted":"",style:{position:"absolute",height:"100%",width:"100%",backgroundColor:e.props.color}},e.props.children,t.placeholder))}))}}]),a}(s.Component),He=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(r.a)({},t.target.name,t.target.value))},e.customGame=function(t){t.preventDefault();var a=e.state.code;if(e.state.joinedRoom){var s=e.state.user;S.emit("waiting",{user:s,room:a})}},e.state={user:null,opponent:{},joinedRoom:!1,joinedMatch:!1,matchRoom:null,player:null,myMove:null,loading:!1,lost:!1,won:!1,draw:!1,startTime:null,movesMade:0,onlinePlayers:0,roomCode:"",userHits:0,oppHits:0,destroyerRotate:!1,submarineRotate:!1,cruiserRotate:!1,battleshipRotate:!1,carrierRotate:!1,destroyerPos:null,submarinePos:null,cruiserPos:null,battleshipPos:null,carrierPos:null,boardValid:!1,boardReady:!1,board:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],placeholderBoard:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],placeholderOppBoard:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],opBoard:null},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props.user.credentials.handle!==e.user.credentials.handle){S.emit("disconnected");var t=this.props.user.credentials.handle;console.log("".concat(t," joining ").concat("connect")),S.emit("joinRoom",{user:t,room:"connect"}),this.setState({user:this.props.user.credentials.handle})}}},{key:"componentDidMount",value:function(){var e=this;if(S=Be()(),this.props.user.credentials.handle){var t=this.props.user.credentials.handle;console.log("".concat(t," joining ").concat("connect")),S.emit("joinRoom",{user:t,room:"connect"}),this.setState({user:this.props.user.credentials.handle})}S.on("joinedRoom",(function(t){var a=new Date;e.setState({startTime:a}),e.setState({joinedRoom:t}),console.log("joined ".concat(t))})),S.on("loading",(function(t){e.setState({loading:t})})),S.on("joinedMatch",(function(t){e.setState({joinedMatch:!0}),e.setState({matchRoom:t}),e.props.getUserStats(),console.log("joined match ".concat(t))})),S.on("player",(function(t){e.setState({player:t.colour}),e.gameOpponent(t.opp),"white"===t.colour?e.setState({myMove:!0}):e.setState({myMove:!1})})),S.on("sendMove",(function(t){console.log(t),e.onlineMove(t),e.gameOver()})),S.on("setOppBoard",(function(t){e.setState({opBoard:t})})),S.on("numOnline",(function(t){e.setState({onlinePlayers:t})}))}},{key:"componentWillUnmount",value:function(){S.emit("disconnected")}},{key:"gameOpponent",value:function(e){this.props.setOpponent(e)}},{key:"onlineMove",value:function(e){var t=this.state.placeholderBoard,a=this.state.board;console.log(a);var s=e;1===a[s[1]][s[2]]?(t[s[1]][s[2]]=1,this.setState({oppHits:this.state.oppHits+1})):t[s[1]][s[2]]=2,this.setState({placeholderBoard:t}),this.setState({myMove:!0}),this.gameOver()}},{key:"changeboard",value:function(){var e=0,t=0,a=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]];null!==this.state.destroyerPos&&(e+=2,a[this.state.destroyerPos.x][this.state.destroyerPos.y]=1,this.state.destroyerRotate?this.state.destroyerPos.y+1<10&&(a[this.state.destroyerPos.x][this.state.destroyerPos.y+1]=1):this.state.destroyerPos.x+1<10&&(a[this.state.destroyerPos.x+1][this.state.destroyerPos.y]=1)),null!==this.state.submarinePos&&(e+=3,a[this.state.submarinePos.x][this.state.submarinePos.y]=1,this.state.submarineRotate?this.state.submarinePos.y+2<10&&(a[this.state.submarinePos.x][this.state.submarinePos.y+1]=1,a[this.state.submarinePos.x][this.state.submarinePos.y+2]=1):this.state.submarinePos.x+2<10&&(a[this.state.submarinePos.x+1][this.state.submarinePos.y]=1,a[this.state.submarinePos.x+2][this.state.submarinePos.y]=1)),null!==this.state.cruiserPos&&(e+=3,a[this.state.cruiserPos.x][this.state.cruiserPos.y]=1,this.state.cruiserRotate?this.state.cruiserPos.y+2<10&&(a[this.state.cruiserPos.x][this.state.cruiserPos.y+1]=1,a[this.state.cruiserPos.x][this.state.cruiserPos.y+2]=1):this.state.cruiserPos.x+2<10&&(a[this.state.cruiserPos.x+1][this.state.cruiserPos.y]=1,a[this.state.cruiserPos.x+2][this.state.cruiserPos.y]=1)),null!==this.state.battleshipPos&&(e+=4,a[this.state.battleshipPos.x][this.state.battleshipPos.y]=1,this.state.battleshipRotate?this.state.battleshipPos.y+3<10&&(a[this.state.battleshipPos.x][this.state.battleshipPos.y+1]=1,a[this.state.battleshipPos.x][this.state.battleshipPos.y+2]=1,a[this.state.battleshipPos.x][this.state.battleshipPos.y+3]=1):this.state.battleshipPos.x+3<10&&(a[this.state.battleshipPos.x+1][this.state.battleshipPos.y]=1,a[this.state.battleshipPos.x+2][this.state.battleshipPos.y]=1,a[this.state.battleshipPos.x+3][this.state.battleshipPos.y]=1)),null!==this.state.carrierPos&&(e+=5,a[this.state.carrierPos.x][this.state.carrierPos.y]=1,this.state.carrierRotate?this.state.carrierPos.y+4<10&&(a[this.state.carrierPos.x][this.state.carrierPos.y+1]=1,a[this.state.carrierPos.x][this.state.carrierPos.y+2]=1,a[this.state.carrierPos.x][this.state.carrierPos.y+3]=1,a[this.state.carrierPos.x][this.state.carrierPos.y+4]=1):this.state.carrierPos.x+4<10&&(a[this.state.carrierPos.x+1][this.state.carrierPos.y]=1,a[this.state.carrierPos.x+2][this.state.carrierPos.y]=1,a[this.state.carrierPos.x+3][this.state.carrierPos.y]=1,a[this.state.carrierPos.x+4][this.state.carrierPos.y]=1));for(var s=0;s<10;s++)for(var n=0;n<10;n++)1===a[s][n]&&t++;t===e?(this.setState({boardValid:!1}),this.setState({board:a})):this.setState({boardValid:!0}),17===t&&this.setState({boardReady:!0})}},{key:"updateStats",value:function(e){var t=((new Date).getTime()-this.state.startTime.getTime())/1e3,a=this.props.stats;a.battleships.gamesPlayed=a.battleships.gamesPlayed+1,a.battleships.hoursPlayed=a.battleships.hoursPlayed+t,a.battleships.movesMade=a.battleships.movesMade+this.state.movesMade,e?(a.battleships.gamesWon=a.battleships.gamesWon+1,a.battleships.winTimes=a.battleships.winTimes+t,a.battleships.winMoves=a.battleships.winMoves+this.state.movesMade,a.recent.winLoss="Win"):a.recent.winLoss="Loss",a.recent.game="Battleships",a.recent.movesMade=this.state.movesMade,a.recent.opponent=this.props.opponent.opponent.handle,a.recent.timePlayed=t,this.props.setUserStats(a)}},{key:"gameOver",value:function(){this.state.userHits>=17&&(this.setState({won:!0}),this.setState({myMove:!1}),this.updateStats(!0)),this.state.oppHits>=17&&(this.setState({lost:!0}),this.setState({myMove:!1}),this.updateStats(!1))}},{key:"checkRotate",value:function(e){var t=this,a=function(){t.changeboard()};"Destroyer"===e?this.setState({destroyerRotate:!this.state.destroyerRotate},a):"Submarine"===e?this.setState({submarineRotate:!this.state.submarineRotate},a):"Cruiser"===e?this.setState({cruiserRotate:!this.state.cruiserRotate},a):"Battleship"===e?this.setState({battleshipRotate:!this.state.battleshipRotate},a):"Carrier"===e&&this.setState({carrierRotate:!this.state.carrierRotate},a)}},{key:"checkPos",value:function(e,t){var a=this,s=function(){a.changeboard()},n=t.split("-");"Destroyer"===e?n.length<2?this.setState({destroyerPos:null},s):this.setState({destroyerPos:{x:parseInt(n[0]),y:parseInt(n[1])}},s):"Submarine"===e?n.length<2?this.setState({submarinePos:null},s):this.setState({submarinePos:{x:parseInt(n[0]),y:parseInt(n[1])}},s):"Cruiser"===e?n.length<2?this.setState({cruiserPos:null},s):this.setState({cruiserPos:{x:parseInt(n[0]),y:parseInt(n[1])}},s):"Battleship"===e?n.length<2?this.setState({battleshipPos:null},s):this.setState({battleshipPos:{x:parseInt(n[0]),y:parseInt(n[1])}},s):"Carrier"===e&&(n.length<2?this.setState({carrierPos:null},s):this.setState({carrierPos:{x:parseInt(n[0]),y:parseInt(n[1])}},s))}},{key:"render",value:function(){for(var e=this,t=function(t){var a=e.state.placeholderOppBoard,s=e.state.matchRoom,n=t.target.id.split("-");e.state.myMove&&0===a[n[1]][n[2]]&&(1===e.state.opBoard[n[1]][n[2]]?(a[n[1]][n[2]]=1,e.setState({userHits:e.state.userHits+1})):a[n[1]][n[2]]=2,S.emit("sendMove",{currentmove:n,matchRoom:s}),e.setState({movesMade:e.state.movesMade+1}),e.setState({placeholderOppBoard:a}),e.state.userHits+1>=17&&e.setState({won:!0}),e.setState({myMove:!1}))},a=[],s=[],o=0;o<10;o++)for(var c=0;c<10;c++)0===this.state.placeholderBoard[c][o]&&a.push(n.a.createElement(We,{key:c+10*o,location:"".concat(c,"-").concat(o)})),1===this.state.placeholderBoard[c][o]&&a.push(n.a.createElement(We,{key:c+10*o,location:"".concat(c,"-").concat(o),color:"orangered"})),2===this.state.placeholderBoard[c][o]&&a.push(n.a.createElement(We,{key:c+10*o,location:"".concat(c,"-").concat(o),color:"#333"}));for(var r=0;r<10;r++)for(var i=0;i<10;i++)0===this.state.placeholderOppBoard[i][r]&&s.push(n.a.createElement("div",{key:i+10*r,id:"-".concat(i,"-").concat(r),className:"shipPanel",onClick:t})),1===this.state.placeholderOppBoard[i][r]&&s.push(n.a.createElement("div",{key:i+10*r,id:"-".concat(i,"-").concat(r),className:"shipPanel",onClick:t,style:{backgroundColor:"orangered"}})),2===this.state.placeholderOppBoard[i][r]&&s.push(n.a.createElement("div",{key:i+10*r,id:"-".concat(i,"-").concat(r),className:"shipPanel",onClick:t,style:{backgroundColor:"#333"}}));return this.state.joinedMatch?n.a.createElement("div",{style:{width:"100%",height:"100vh"}},n.a.createElement(Me.a,{onDragEnd:function(t){var a=t.destination,s=(t.source,t.draggableId);if(a){var n=document.getElementById(a.droppableId),o=document.getElementById(s);e.checkPos(s,a.droppableId),n.appendChild(o)}}},n.a.createElement("div",{className:"homeBattlefield"},n.a.createElement("h3",null,"Home fleet"),n.a.createElement("div",{className:"ships",id:"ships"},n.a.createElement(We,{location:"dockDestroyer"},n.a.createElement(Ae,{id:"Destroyer",index:0,length:2,checkRotate:this.checkRotate.bind(this)})),n.a.createElement(We,{location:"dockSubmarine"},n.a.createElement(Ae,{id:"Submarine",index:1,length:3,checkRotate:this.checkRotate.bind(this)})),n.a.createElement(We,{location:"dockCruiser"},n.a.createElement(Ae,{id:"Cruiser",index:2,length:3,checkRotate:this.checkRotate.bind(this)})),n.a.createElement(We,{location:"dockBattleship"},n.a.createElement(Ae,{id:"Battleship",index:3,length:4,checkRotate:this.checkRotate.bind(this)})),n.a.createElement(We,{location:"dockCarrier"},n.a.createElement(Ae,{id:"Carrier",index:4,length:5,checkRotate:this.checkRotate.bind(this)}))),n.a.createElement("div",{className:this.state.boardValid?"battlefield nonValid":"battlefield"},a),this.state.boardReady&&n.a.createElement("button",{className:"deploy",onClick:function(){var t=e.state.board,a=e.state.matchRoom,s=document.getElementById("ships"),n=document.getElementById("Destroyer"),o=document.getElementById("Submarine"),c=document.getElementById("Cruiser"),r=document.getElementById("Battleship"),i=document.getElementById("Carrier");n.remove(),o.remove(),c.remove(),r.remove(),i.remove(),s.remove(),S.emit("battleBoard",{board:t,matchRoom:a}),e.setState({boardReady:!1})}},"Deploy fleet")),n.a.createElement("div",{id:"oppBoard"},n.a.createElement("h3",null,"Opponent fleet"),n.a.createElement("div",{className:"battlefield"},!this.state.opBoard&&n.a.createElement("div",{style:{width:"inherit",height:"inherit",backgroundColor:"rgba(0,0,0,0.4)",color:"white"}},"waiting"),this.state.opBoard&&s))),this.state.won&&n.a.createElement("div",{className:"endScreen"},n.a.createElement("h3",null,"You Won"),n.a.createElement(v.b,{to:"/games",className:"btn"},"Back to games")),this.state.draw&&n.a.createElement("div",{className:"endScreen"},n.a.createElement("h3",null,"Draw"),n.a.createElement(v.b,{to:"/games",className:"btn"},"Back to games")),this.state.lost&&n.a.createElement("div",{className:"endScreen"},n.a.createElement("h3",null,"You Lost"),n.a.createElement(v.b,{to:"/games",className:"btn"},"Back to games"))):n.a.createElement("div",{style:{textAlign:"center"},className:"BG"},n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(v.b,{to:"/app"},n.a.createElement("h3",{className:"pageTitle "},"boredGames"))),n.a.createElement("li",null))),n.a.createElement("h3",{className:"popGames"},"Battleships"),n.a.createElement("div",{className:"divider"}),this.state.user&&!this.state.loading&&n.a.createElement("div",null,n.a.createElement("button",{className:"btn",onClick:function(){if(e.state.joinedRoom){var t=e.state.user;S.emit("waiting",{user:t,room:"connect"})}}},"Find Match")),this.state.user&&this.state.loading&&n.a.createElement("button",{className:"btn",onClick:function(){if(e.state.joinedRoom){var t=e.state.user;S.emit("stopSearch",{user:t,room:"connect"})}}},"Cancel search"),this.state.loading&&n.a.createElement("h3",{className:"load"},"Loading..."),n.a.createElement("h4",{style:{marginBottom:"1rem",color:"white"}},"Players online: ",this.state.onlinePlayers),n.a.createElement("div",null,n.a.createElement("h3",{className:"popGames"},"Custom Match"),n.a.createElement("button",{className:"btn",onClick:function(){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=a.length,n=0;n<6;n++)t+=a.charAt(Math.floor(Math.random()*s));e.setState({customRoom:t})}},"Generate Code"),this.state.customRoom&&n.a.createElement("h3",null,this.state.customRoom),n.a.createElement("div",{className:"inputCode"},n.a.createElement("form",{noValidate:!0,onSubmit:this.customGame},n.a.createElement("input",{value:this.state.users,id:"code",type:"text",name:"code",className:"input",placeholder:"input code",onChange:this.handleChange}),n.a.createElement("button",{type:"submit",className:"btn"},"Join")))))}}]),a}(s.Component),Ve=Object(g.b)((function(e){return{user:e.user,stats:e.statistics.stats,opponent:e.opponent}}),{setOpponent:xe,setUserStats:I,getUserStats:C})(He),Ye=a(39),ze=a(10),Je=Object(g.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,a=e.authenticated,s=Object(Ye.a)(e,["component","authenticated"]);return n.a.createElement(ze.b,Object.assign({},s,{render:function(e){return!0===a?n.a.createElement(ze.a,{to:"/app"}):n.a.createElement(t,e)}}))})),Qe=Object(g.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,a=e.authenticated,s=Object(Ye.a)(e,["component","authenticated"]);return n.a.createElement(ze.b,Object.assign({},s,{render:function(e){return!1===a?n.a.createElement(ze.a,{to:"/"}):n.a.createElement(t,e)}}))})),Xe=a(18),qe=a(91),Ke={authenticated:!1,credentials:{}},Ze={loading:!1,errors:null},$e={friendList:[],friendData:{},searchedFriend:{},isFriend:!1},et={opponent:{}},tt={stats:{}},at=[qe.a],st=Object(Xe.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHENTICATED":return Object(F.a)(Object(F.a)({},e),{},{authenticated:!0});case"SET_UNAUTHENTICATED":return Ke;case"SET_USER":return Object(F.a)({authenticated:!0},t.payload);default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FRIEND":return Object(F.a)(Object(F.a)({},e),{},{isFriend:!1});case"SET_FRIENDS":case"SEARCH_FRIEND":return Object(F.a)(Object(F.a)({},e),t.payload);case"IS_FRIEND":return Object(F.a)(Object(F.a)({},e),{},{isFriend:!1});case"NOT_FRIEND":return Object(F.a)(Object(F.a)({},e),{},{isFriend:!0});case"APPEND_FRIEND":return Object(F.a)(Object(F.a)({},e),{},{friendData:Object(F.a)(Object(F.a)({},e.friendData),{},Object(r.a)({},t.payload.userId,Object(F.a)({},t.payload)))});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(F.a)(Object(F.a)({},e),{},{loading:!1,errors:t.payload});case"CLEAR_ERRORS":return Object(F.a)(Object(F.a)({},e),{},{loading:!1,errors:null});case"LOADING_UI":return Object(F.a)(Object(F.a)({},e),{},{loading:!0});default:return e}},opponent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_OPPONENT":return Object(F.a)(Object(F.a)({},e),t.payload);default:return e}},statistics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STATS":return Object(F.a)(Object(F.a)({},e),t.payload);default:return e}}}),nt=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Xe.d)(Xe.a.apply(void 0,at)),ot=Object(Xe.e)(st,{},nt),ct=N.firestore(),rt=N.database(),it=(ct.collection("users"),rt.ref(".info/connected"));N.auth().onAuthStateChanged((function(e){e?(it.on("value",(function(t){rt.ref("/status/".concat(e.uid)).onDisconnect().set("offline").then((function(){rt.ref("/status/".concat(e.uid)).set("online")})),window.onblur=function(){rt.ref("/status/".concat(e.uid)).onDisconnect().set("offline").then((function(){rt.ref("/status/".concat(e.uid)).set("away")}))},window.onfocus=function(){rt.ref("/status/".concat(e.uid)).onDisconnect().set("offline").then((function(){rt.ref("/status/".concat(e.uid)).set("online")}))}})),ot.dispatch({type:"SET_AUTHENTICATED"}),ot.dispatch(R()),ot.dispatch(C()),ot.dispatch(G())):ot.dispatch(j())}));var lt=function(){return n.a.createElement(g.a,{store:ot},n.a.createElement(v.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(Je,{exact:!0,path:"/login",component:D}),n.a.createElement(Je,{exact:!0,path:"/signup",component:T}),n.a.createElement("div",{className:"container"},n.a.createElement(Je,{exact:!0,path:"/",component:U}),n.a.createElement(Qe,{exact:!0,path:"/app",component:Z}),n.a.createElement(Qe,{exact:!0,path:"/games",component:$}),n.a.createElement(Qe,{exact:!0,path:"/stats",component:te}),n.a.createElement(Qe,{path:"/games/chess",component:Fe}),n.a.createElement(Qe,{path:"/games/connect",component:Ge}),n.a.createElement(Qe,{path:"/games/battle",component:Ve})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},29:function(e,t,a){e.exports=a.p+"static/media/chess.248b0159.PNG"},30:function(e,t,a){e.exports=a.p+"static/media/connect4.c176bba0.PNG"},31:function(e,t,a){e.exports=a.p+"static/media/battleship.d7bfb940.PNG"},38:function(e,t,a){e.exports=a.p+"static/media/Bishop.255a39db.svg"},41:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},54:function(e,t){var a=function(e){return""===e.trim()};t.validateSignupData=function(e){var t={};return a(e.email)?t.email="Must not be empty":e.email.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||(t.email="Must be a valid email address"),a(e.password)&&(t.password="Must not be empty"),e.password!==e.confirmPassword&&(t.confirmPassword="passwords must match"),a(e.handle)&&(t.handle="Must not be empty"),{errors:t,valid:0===Object.keys(t).length}},t.validateLoginData=function(e){var t={};return a(e.email)&&(t.email="Must not be empty"),a(e.password)&&(t.password="Must not be empty"),{errors:t,valid:0===Object.keys(t).length}},t.reduceUserDetails=function(e){var t={};return a(e.bio.trim())||(t.bio=e.bio),a(e.location.trim())||(t.location=e.location),console.log(t),t}},57:function(e,t,a){e.exports=a.p+"static/media/close.bad80992.svg"},59:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){e.exports=a.p+"static/media/settings-24px.dd8af600.svg"},79:function(e,t,a){e.exports=a.p+"static/media/bb.8011bf44.svg"},80:function(e,t,a){e.exports=a.p+"static/media/bk.d8979832.svg"},81:function(e,t,a){e.exports=a.p+"static/media/bq.ef6e2590.svg"},82:function(e,t,a){e.exports=a.p+"static/media/br.08c3972b.svg"},83:function(e,t,a){e.exports=a.p+"static/media/bn.daa3de25.svg"},84:function(e,t,a){e.exports=a.p+"static/media/bp.d1670065.svg"},85:function(e,t,a){e.exports=a.p+"static/media/wb.1fe99b0c.svg"},86:function(e,t,a){e.exports=a.p+"static/media/wk.d0c846df.svg"},87:function(e,t,a){e.exports=a.p+"static/media/wq.1198ca3c.svg"},88:function(e,t,a){e.exports=a.p+"static/media/wr.02fb1599.svg"},89:function(e,t,a){e.exports=a.p+"static/media/wn.07bc214c.svg"},90:function(e,t,a){e.exports=a.p+"static/media/wp.87aea985.svg"},93:function(e,t,a){e.exports=a(150)},98:function(e,t,a){},99:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.ac1bf870.chunk.js.map